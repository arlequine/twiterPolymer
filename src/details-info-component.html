<link rel="import" href="../../bower_components/polymer/polymer-element.html">

<dom-module id="details-info-component">
    <template>
        <style>
            paper-card{
                width: 80%;
                margin: 10px auto;
                display: grid
            }
            .post-module:hover {
                -webkit-box-shadow: 0px 1px 35px 0px rgba(0, 0, 0, 0.3);
                -moz-box-shadow: 0px 1px 35px 0px rgba(0, 0, 0, 0.3);
                box-shadow: 0px 1px 35px 0px rgba(0, 0, 0, 0.3);
            }
            .post-module {
                position: relative;
                z-index: 1;
                display: block;
                background: #FFFFFF;
                min-width: 270px;
                height: 470px;
                -webkit-box-shadow: 0px 1px 2px 0px rgba(0, 0, 0, 0.15);
                -moz-box-shadow: 0px 1px 2px 0px rgba(0, 0, 0, 0.15);
                box-shadow: 0px 1px 2px 0px rgba(0, 0, 0, 0.15);
                -webkit-transition: all 0.9s ease 0s;
                -moz-transition: all 0.9s ease 0s;
                -ms-transition: all 0.9s ease 0s;
                -o-transition: all 0.9s ease 0s;
                transition: all 0.9s ease 0s;
                
            }
            .post-module .thumbnail {
                background: #000000;
                height: 350px;
                overflow: hidden;
            }
            .post-module .thumbnail .date {
                position: absolute;
                top: 10px;
                right: 20px;
                z-index: 1;
                background: #e74c3c;
                width: 55px;
                height: 55px;
                padding: 12.5px 0;
                -webkit-border-radius: 100%;
                -moz-border-radius: 100%;
                border-radius: 100%;
                color: #FFFFFF;
                font-weight: 700;
                text-align: center;
                -webkti-box-sizing: border-box;
                -moz-box-sizing: border-box;
                box-sizing: border-box;
            }
            .post-module .thumbnail .date .day {
                font-size: 18px;
            }
            .post-module .thumbnail .date .month {
                font-size: 12px;
                line-height: 10px;
                text-transform: uppercase;
            }
            .post-module .thumbnail img {
                display: block;
                width: 120%;
                -webkit-transition: all 0.3s linear 0s;
                -moz-transition: all 0.3s linear 0s;
                -ms-transition: all 0.3s linear 0s;
                -o-transition: all 0.3s linear 0s;
                transition: all 0.3s linear 0s;
            }

            .post-module:hover .thumbnail img, .hover .thumbnail img {
                -webkit-transform: scale(1.1);
                -moz-transform: scale(1.1);
                transform: scale(1.1);
                opacity: .6;
            }
            .post-module .post-content .category {
                position: absolute;
                top: -40px;
                left: 0;
                background: #e74c3c;
                padding: 10px 15px;
                color: #FFFFFF;
                font-size: 14px;
                font-weight: 600;
                text-transform: uppercase;
                border-radius: 2px;
            }            
            .post-module .post-content {
                position: absolute;
                bottom: 0;
                background: #FFFFFF;
                width: 100%;
                padding: 20px;
                -webkit-box-sizing: border-box;
                -moz-box-sizing: border-box;
                box-sizing: border-box;
                -webkit-transition: all 0.3s cubic-bezier(0.37, 0.75, 0.61, 1.05) 0s;
                -moz-transition: all 0.3s cubic-bezier(0.37, 0.75, 0.61, 1.05) 0s;
                -ms-transition: all 0.3s cubic-bezier(0.37, 0.75, 0.61, 1.05) 0s;
                -o-transition: all 0.3s cubic-bezier(0.37, 0.75, 0.61, 1.05) 0s;
                transition: all 0.3s cubic-bezier(0.37, 0.75, 0.61, 1.05) 0s;
            }
            .post-content:hover .description, .post-module:hover .description {
                display: block !important;
                height: auto !important;
                opacity: 1 !important;
            }
            .post-module .post-content .post-meta {
                margin: 30px 0 0;
                color: #999999;
            }
            .post-content h1, .post-content h2{
                cursor: pointer;
            }
            .post-meta.card-actions{
                border-top: 1px solid #e8e8e8;
            }
            .post-module .post-content .post-meta .timestamp {
                margin: 0 16px 0 0;
            }
            .post-module .post-content .post-meta a {
                color: #999999;
                text-decoration: none;
            }
        </style>
        <template is="dom-repeat" items="[[postsUser]]">
            <paper-card>
                    <div class="post-module">
                            <div class="thumbnail">
                                <div class="date" style="display: none;">
                                    <div class="day"> </div>
                                    <div class="month">Mar</div>
                                </div>
                                <img src$="[[random()]]">
                            </div>
                                <!-- Post Content-->
                            <div class="post-content">
                                <div class="category">[[_formatDate(item.date)]]</div>
                                    <h1 class="title">[[item.title]]</h1>
                                    <p class="description" style="display: none; height: 100px; opacity: 1;">[[item.body]]</p>
                                    <div class="post-meta card-actions">
                                        <span class="timestamp"><i class="fa fa-clock-o"></i> 6 mins ago</span>
                                        <span class="comments"><iron-icon class="star" icon="question-answer"></iron-icon><a href="#"> 39 comments</a></span>
                                    </div>
                                </div>
                            </div>
                </paper-card>
        </template>
        <!-- <template is="dom-repeat" items="{{data}}" as="user">
            <h1>First name: <span>{{user.name}}</span></h1>
            <template is="dom-repeat" items="{{user.posts}}" as="posts" >
                <paper-card>
                    <div class="post-module">
                            <div class="thumbnail">
                                <div class="date">
                                    <div class="day">27</div>
                                    <div class="month">Mar</div>
                                </div>
                                <img src="/img/[[properties.random]]">
                            </div>
                                <!-- Post Content-->
                            <!-- <div class="post-content">
                                <div class="category">{{posts.date}}</div>
                                    <h1 class="title">{{posts.title}}</h1>
                                    <p class="description" style="display: none; height: 100px; opacity: 1;">
                                        {{posts.body}}</p>
                                    <div class="post-meta card-actions">
                                        <span class="timestamp"><i class="fa fa-clock-o"></i> 6 mins ago</span>
                                        <span class="comments"><i class="fa fa-comments"></i><a href="#"> 39 comments</a></span>
                                    </div>
                                </div>
                            </div>
                </paper-card>
            </template>
        </template> --> 
        <paper-card >
    </template>
    <script>
        (function detailsInfoComponent(customElements) {
        'use strict';
        class DetailsInfoComponent extends Polymer.Element{
            static get is() { return 'details-info-component' };
            static get properties() {
                return {
                    prop: String,
                    data:  Object,
                    random: {
                        type: Function
                    },
                    postsUser: {
                        type: Array,
                        //observer: 'random'
                    },
                    Backgrounds:{
                        type: Array,
                        value: ['cdmx.jpeg', 'zcdmx.jpg', 'acdmx.jpg']
                    }
                }
            }
            random() {
                const randomBg = parseInt(Math.random() * 3);
                //console.log(this.Backgrounds[randomBg]);
                return `/img/${this.Backgrounds[randomBg]}`;
            }
            _formatDate(date){
                //console.log(date);
                let year = date.substr(0,4);
                let month = date.substr(5,2);
                let day = date.substr(8,2)
                
                let full = `${day}/${month}/${year}`;
                return full;
            }
        }
        customElements.define(DetailsInfoComponent.is, DetailsInfoComponent);
        })(window.customElements);

    </script>
</dom-module>